import{m as I,A as P,B,C as G,v as x,D,h as i,E as $,G as w,I as N,l as C,q as g,H as J,J as M,n as z,K as Q,_ as E,b as L,f as T,o as v,c as p,w as h,F as V,r as F,t as R,x as W,u as X,e as Z,g as ee,a as b,i as te,L as ne,j as ae,p as oe,k as se}from"./index-d69430ba.js";import{T as ce,a as ie}from"./index-b90f6f1b.js";import{_ as O}from"./Header-53ed58ce.js";import{_ as j}from"./ListItem-c52e1edc.js";import{r as H,u as K}from"./use-route-d5cecb2c.js";import{a as de}from"./api-cb560b03.js";import{A as re,a as le,b as ue}from"./index-32863ddd.js";import"./use-id-6c976a03.js";import"./index-fa137dd3.js";import"./use-placeholder-b054e2b6.js";import"./index-7885404b.js";const[me,k]=I("action-bar-icon"),_e=P({},H,{dot:Boolean,text:String,icon:String,color:String,badge:B,iconClass:G,badgeProps:Object,iconPrefix:String});var ve=x({name:me,props:_e,setup(e,{slots:n}){const o=K();D(re);const d=()=>{const{dot:l,badge:u,icon:a,color:s,iconClass:c,badgeProps:t,iconPrefix:r}=e;return n.icon?i(w,$({dot:l,class:k("icon"),content:u},t),{default:n.icon}):i(N,{tag:"div",dot:l,name:a,badge:u,color:s,class:[k("icon"),c],badgeProps:t,classPrefix:r},null)};return()=>i("div",{role:"button",class:k(),tabindex:0,onClick:o},[d(),n.default?n.default():e.text])}});const fe=C(ve),[U,pe]=I("sidebar"),Y=Symbol(U),be={modelValue:g(0)};var ge=x({name:U,props:be,emits:["change","update:modelValue"],setup(e,{emit:n,slots:o}){const{linkChildren:d}=J(Y),l=()=>+e.modelValue;return d({getActive:l,setActive:a=>{a!==l()&&(n("update:modelValue",a),n("change",a))}}),()=>{var a;return i("div",{role:"tablist",class:pe()},[(a=o.default)==null?void 0:a.call(o)])}}});const he=C(ge),[Ie,S]=I("sidebar-item"),xe=P({},H,{dot:Boolean,title:String,badge:B,disabled:Boolean,badgeProps:Object});var Ce=x({name:Ie,props:xe,emits:["click"],setup(e,{emit:n,slots:o}){const d=K(),{parent:l,index:u}=D(Y);if(!l)return;const a=()=>{e.disabled||(n("click",u.value),l.setActive(u.value),d())};return()=>{const{dot:s,badge:c,title:t,disabled:r}=e,m=u.value===l.getActive();return i("div",{role:"tab",class:S({select:m,disabled:r}),tabindex:r?void 0:0,"aria-selected":m,onClick:a},[i(w,$({dot:s,class:S("text"),content:c},e.badgeProps),{default:()=>[o.title?o.title():t]})])}}});const ke=C(Ce),[Ae,f]=I("tree-select"),ye={max:g(1/0),items:M(),height:g(300),selectedIcon:z("success"),mainActiveIndex:g(0),activeId:{type:[Number,String,Array],default:0}};var Se=x({name:Ae,props:ye,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(e,{emit:n,slots:o}){const d=t=>Array.isArray(e.activeId)?e.activeId.includes(t):e.activeId===t,l=t=>{const r=()=>{if(t.disabled)return;let m;if(Array.isArray(e.activeId)){m=e.activeId.slice();const _=m.indexOf(t.id);_!==-1?m.splice(_,1):m.length<+e.max&&m.push(t.id)}else m=t.id;n("update:activeId",m),n("clickItem",t)};return i("div",{key:t.id,class:["van-ellipsis",f("item",{active:d(t.id),disabled:t.disabled})],onClick:r},[t.text,d(t.id)&&i(N,{name:e.selectedIcon,class:f("selected")},null)])},u=t=>{n("update:mainActiveIndex",t)},a=t=>n("clickNav",t),s=()=>{const t=e.items.map(r=>i(ke,{dot:r.dot,badge:r.badge,class:[f("nav-item"),r.className],disabled:r.disabled,onClick:a},{title:()=>o["nav-text"]?o["nav-text"](r):r.text}));return i(he,{class:f("nav"),modelValue:e.mainActiveIndex,onChange:u},{default:()=>[t]})},c=()=>{if(o.content)return o.content();const t=e.items[+e.mainActiveIndex]||{};if(t.children)return t.children.map(l)};return()=>i("div",{class:f(),style:{height:Q(e.height)}},[s(),i("div",{class:f("content")},[c()])])}});const Pe=C(Se);const Be={components:{ListItem:j},props:["index","foodData"],setup(e){let n=L({activeIndex:0,items:[],subItem:[]});const o=()=>{var s,c;let a=[];(c=(s=e.foodData)==null?void 0:s.items)==null||c.forEach((t,r)=>{a.push({text:t.text}),n.activeIndex===r&&(n.subItem=t.children)}),n.items=a};o();const d=a=>{n.activeIndex=a,o()},l=a=>{n.subItem.forEach((s,c)=>{s.id===a&&(s.add=!1,s.num+=1)})},u=(a,s)=>{n.subItem.forEach(c=>{c.id===s.name&&(c.num=a)})};return{...T(n),navClick:d,handleAdd:l,handlecChange:u}}},De={key:0,class:"food-list"},$e={key:1};function we(e,n,o,d,l,u){const a=j,s=Pe;return o.index===0?(v(),p("div",De,[i(s,{"main-active-index":e.activeIndex,"onUpdate:mainActiveIndex":n[0]||(n[0]=c=>e.activeIndex=c),height:"88vw",items:e.items,onClickNav:d.navClick},{content:h(()=>[(v(!0),p(V,null,F(e.subItem,(c,t)=>(v(),p("div",{key:t,class:"item-bg"},[i(a,{item:c,handleAdd:d.handleAdd,handlecChange:d.handlecChange},null,8,["item","handleAdd","handlecChange"])]))),128))]),_:1},8,["main-active-index","items","onClickNav"])])):(v(),p("div",$e,R(o.foodData.content),1))}const Ne=E(Be,[["render",we],["__scopeId","data-v-afaba29b"]]);const Ee={components:{Header:O,FoodList:Ne},setup(){let e=W();const n=X();let o=L({title:"鸿运酸菜鱼",img:"https://www.1616n.com/upload/resources/image/2017/09/26/680843.png",storeData:[]});const d=()=>{de().then(s=>{o.storeData=s})};Z(()=>{d()});const l=s=>{const c=e.state.cartList||[];if(o.storeData.forEach(t=>{var r;(r=t.data.items)==null||r.forEach(m=>{m.children.forEach(_=>{_.num>0&&c.push(_)})})}),c.length===0){ne("还未购买哟~");return}e.commit("ADDCART",c),s==="buy"&&u()},u=()=>{n.push("/cart")},a=()=>{l("buy")};return{...T(o),handleAddCart:l,store:e,goCart:u,goBuy:a}}},q=e=>(oe("data-v-2934e3c2"),e=e(),se(),e),Le={class:"storeDetails"},Te={class:"content"},Ve=q(()=>b("div",{class:"img"},null,-1)),Fe={class:"foodSort"},Re=q(()=>b("div",{class:"sort"},null,-1)),Oe={class:"name"},je=["src"];function He(e,n,o,d,l,u){const a=O,s=ee("FoodList"),c=ie,t=ce,r=fe,m=ue,_=le;return v(),p("div",Le,[i(a,{title:"店铺"}),b("div",Te,[Ve,b("div",Fe,[Re,b("div",Oe,[te(R(e.title)+" ",1),b("img",{src:e.img,alt:"",class:"store-img"},null,8,je)]),i(t,{color:"#ffc400"},{default:h(()=>[(v(!0),p(V,null,F(e.storeData,(A,y)=>(v(),ae(c,{key:y,title:A.name},{default:h(()=>[i(s,{index:y,foodData:A.data},null,8,["index","foodData"])]),_:2},1032,["title"]))),128))]),_:1})])]),i(_,null,{default:h(()=>[i(r,{icon:"chat-o",text:"客服"}),i(r,{icon:"cart-o",text:"购物车",badge:d.store.state.cartList.length,onClick:d.goCart},null,8,["badge","onClick"]),i(m,{type:"warning",text:"加入购物车",onClick:d.handleAddCart},null,8,["onClick"]),i(m,{type:"danger",text:"立即购买",onClick:d.goBuy},null,8,["onClick"])]),_:1})])}const Ze=E(Ee,[["render",He],["__scopeId","data-v-2934e3c2"]]);export{Ze as default};
