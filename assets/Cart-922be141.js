import{_ as V}from"./Footer-194eb8c2.js";import{_ as w}from"./Empty-fa23fb82.js";import{_ as I}from"./Header-53ed58ce.js";import{l as P,m as U,n as y,q as $,s as q,v as H,d as T,h as s,I as R,_ as A,u as j,x as F,b as z,e as N,y as G,f as M,g as D,o as _,c as g,a as C,w as k,F as J,r as K,j as v,i as L,z as B}from"./index-d69430ba.js";import{s as O,_ as Q,C as W}from"./ListItem-c52e1edc.js";import"./index-fa137dd3.js";import{B as X}from"./index-7885404b.js";import{u as Y}from"./use-placeholder-b054e2b6.js";import"./use-route-d5cecb2c.js";const Z=P(O),[ee,i,te]=U("submit-bar"),ne={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:y("¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:y("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:$(2),safeAreaInsetBottom:q};var oe=H({name:ee,props:ne,emits:["submit"],setup(t,{emit:a,slots:n}){const e=T(),b=Y(e,i),f=()=>{const{price:o,label:r,currency:c,textAlign:l,suffixLabel:m,decimalLength:S}=t;if(typeof o=="number"){const x=(o/100).toFixed(+S).split("."),E=S?`.${x[1]}`:"";return s("div",{class:i("text"),style:{textAlign:l}},[s("span",null,[r||te("label")]),s("span",{class:i("price")},[c,s("span",{class:i("price-integer")},[x[0]]),E]),m&&s("span",{class:i("suffix-label")},[m])])}},h=()=>{var o;const{tip:r,tipIcon:c}=t;if(n.tip||r)return s("div",{class:i("tip")},[c&&s(R,{class:i("tip-icon"),name:c},null),r&&s("span",{class:i("tip-text")},[r]),(o=n.tip)==null?void 0:o.call(n)])},p=()=>a("submit"),d=()=>n.button?n.button():s(X,{round:!0,type:t.buttonType,text:t.buttonText,class:i("button",t.buttonType),color:t.buttonColor,loading:t.loading,disabled:t.disabled,onClick:p},null),u=()=>{var o,r;return s("div",{ref:e,class:[i(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(o=n.top)==null?void 0:o.call(n),h(),s("div",{class:i("bar")},[(r=n.default)==null?void 0:r.call(n),f(),d()])])};return()=>t.placeholder?b(u):u()}});const se=P(oe);const ae={setup(t){const a=j(),n=F(),e=z({checked:[],submitChecked:!0}),b=(c,l)=>{n.state.cartList.map(m=>{m.id===l.name&&(m.num=c)})},f=()=>{e.checked=n.state.cartList.map(c=>c.id)};N(()=>{f()});const h=()=>{e.checked.length?(n.commit("pay",o()),a.push({path:"/createorder",query:{list:e.checked}})):B("请选择你想吃的食物哦!!!")},p=()=>{e.checked.length!==n.state.cartList.length?f():e.checked=[]},d=c=>{c.length===n.state.cartList.length?e.submitChecked=!0:e.submitChecked=!1,e.checked=c},u=G(()=>{let c=o(),l=0;return c.forEach(m=>{l+=m.num*m.price}),l*100}),o=c=>n.state.cartList.filter(l=>c==="delete"?!e.checked.includes(l.id):e.checked.includes(l.id)),r=()=>{e.checked.length?(n.commit("delete",o("delete")),e.checked=[],n.state.cartList.length||(t.changeShow(),n.commit("edit","delete"))):B("请选择要删除的商品")};return{...M(e),handlecChange:b,store:n,onSubmit:h,choseAll:p,groupChange:d,allPrice:u,Deletes:r,upData:o}},components:{ListItemVue:Q},props:["changeShow"]},ce={class:"cartList"},re={class:"content"},ie={key:1,class:"buy"},le={class:"left"};function de(t,a,n,e,b,f){const h=D("ListItemVue"),p=Z,d=W,u=se;return _(),g("div",ce,[C("div",re,[s(p,{modelValue:t.checked,"onUpdate:modelValue":a[0]||(a[0]=o=>t.checked=o),onChange:e.groupChange},{default:k(()=>[(_(!0),g(J,null,K(e.store.state.cartList,(o,r)=>(_(),g("div",{key:r},[s(h,{item:o,handlecChange:e.handlecChange,showCheckBox:!0},null,8,["item","handlecChange"])]))),128))]),_:1},8,["modelValue","onChange"])]),e.store.state.isDelete?(_(),v(u,{key:0,price:e.allPrice,"button-text":"提交订单",onSubmit:e.onSubmit,class:"submit-all","button-color":"#ffc400"},{default:k(()=>[s(d,{modelValue:t.submitChecked,"onUpdate:modelValue":a[1]||(a[1]=o=>t.submitChecked=o),"checked-color":"#ffc400",onClick:e.choseAll},{default:k(()=>[L("全选")]),_:1},8,["modelValue","onClick"])]),_:1},8,["price","onSubmit"])):(_(),g("div",ie,[C("div",le,[s(d,{modelValue:t.submitChecked,"onUpdate:modelValue":a[2]||(a[2]=o=>t.submitChecked=o),"checked-color":"#ffc400",onClick:e.choseAll},{default:k(()=>[L("全选")]),_:1},8,["modelValue","onClick"])]),C("div",{class:"delete",onClick:a[3]||(a[3]=(...o)=>e.Deletes&&e.Deletes(...o))}," 删除 ")]))])}const ue=A(ae,[["render",de],["__scopeId","data-v-7d3515e2"]]);const me={components:{Footer:V,Empty:w,Header:I,CartList:ue},setup(){const t=T(!0),a=F(),n=()=>{a.state.cartList.length===0&&(t.value=!1)};return N(()=>{n()}),{isShow:t,store:a,changeShow:()=>{t.value=!1}}}},_e={class:"cart"},he={class:"content"};function pe(t,a,n,e,b,f){const h=I,p=D("CartList"),d=w,u=V;return _(),g("div",_e,[C("div",he,[s(h,{title:"购物车",edit:!0}),e.isShow?(_(),v(p,{key:0,changeShow:e.changeShow},null,8,["changeShow"])):(_(),v(d,{key:1}))]),s(u)])}const Le=A(me,[["render",pe],["__scopeId","data-v-5eb87796"]]);export{Le as default};
